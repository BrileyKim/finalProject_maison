<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="admin">
 	<select id="selectProductList" resultType="com.kh.maison.shop.vo.Product">
 		SELECT * FROM PRODUCT
 	</select>
 	
 	<select id="selectFirstTotal" parameterType="Integer" resultType="Integer">
 		SELECT SUM(PRODUCTSTOCK)
 		FROM PRODUCT
 	</select>

	<select id="selectFirstChange" parameterType="Integer" resultType="Integer">
		SELECT SUM(PCAMOUNT)
		FROM PRODUCTCHANGES
		WHERE PCDATE&gt;(SYSDATE-#{numDate})
	</select>
	
	<select id="selectFirstIn" parameterType="Integer" resultType="Integer">
		SELECT SUM(PCAMOUNT)
		FROM PRODUCTCHANGES
		WHERE PCDATE&gt;(SYSDATE-#{numDate})
		AND PCAMOUNT&gt;0
	</select>
	
	<select id="selectFirstOut" parameterType="Integer" resultType="Integer">
		SELECT SUM(PCAMOUNT)
		FROM PRODUCTCHANGES
		WHERE PCDATE&gt;(SYSDATE-#{numDate})
		AND PCAMOUNT&lt;0
	</select>
	
	<select id="selectSecondChange" parameterType="Integer" resultType="Integer">
		SELECT SUM(PCAMOUNT)
		FROM PRODUCTCHANGES
		WHERE TO_DATE(PCDATE,'YY/MM/DD')=TO_DATE(SYSDATE-#{sendNum},'YY/MM/DD')
	</select>
	
	<select id="selectSecondIn" parameterType="Integer" resultType="Integer">
		SELECT SUM(PCAMOUNT)
		FROM PRODUCTCHANGES
		WHERE TO_DATE(PCDATE,'YY/MM/DD')=TO_DATE(SYSDATE-#{sendNum},'YY/MM/DD')
		AND PCAMOUNT&gt;0	
	</select>
	
	<select id="selectSecondOut" parameterType="Integer" resultType="Integer">
		SELECT SUM(PCAMOUNT)
		FROM PRODUCTCHANGES
		WHERE TO_DATE(PCDATE,'YY/MM/DD')=TO_DATE(SYSDATE-#{sendNum},'YY/MM/DD')
		AND PCAMOUNT&lt;0	
	</select>
	
	<select id="selectThirdList" resultType="com.kh.maison.admin.model.vo.ProductStock">
		SELECT P.PRODUCTNO, P.PRODUCTNAME,P.PRODUCTSUMMARY,
               P.PRODUCTIMG, P.PRODUCTSTOCK,C.PCAMOUNT,C.PCDATE
        FROM PRODUCT P, PRODUCTCHANGES C
        WHERE P.PRODUCTNO = C.PRODUCTNO
        ORDER BY PCDATE DESC
	</select>
	
	<select id="selectThirdCount" resultType="Integer">
		SELECT COUNT(*) 
        FROM PRODUCTCHANGES
	</select>
	
	<select id="selectAllRequest" resultType="Request" parameterType="String">
		<if test="!_parameter.equals('')">
			SELECT * FROM REQUEST
			WHERE REQUESTSTATUS=#{requestStatus}
		</if>
		<if test="_parameter.equals('')">
			SELECT * FROM REQUEST
		</if>
	</select>
	
	<select id="selectAllRequestCount" resultType="Integer" parameterType="String">
		<if test="!_parameter.equals('')">
			SELECT COUNT(*) FROM REQUEST
			WHERE REQUESTSTATUS=#{requestStatus}
		</if>
		<if test="_parameter.equals('')">
			SELECT COUNT(*) FROM REQUEST
		</if>		
	</select>
	
	<select id="selectOneRequest" parameterType="_int" resultType="Request">
		SELECT * FROM REQUEST
		WHERE REQUESTNO=#{no}
	</select>
</mapper>
